<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


<h:head>
	<title>Page Login</title>
</h:head>

<h:body>

	<h:link value="Gestion des Produits" outcome="gestionproduits.xhtml"></h:link>
	<h:link value="Recherche" outcome="recherche.xhtml"></h:link>


	<h:form>
		<h:commandButton value="Se déconnecter"
			action="#{adminMB.deconnexion}" update="@all"></h:commandButton>
	</h:form>
	<h1 style="text-align: center; color: gold">Liste des produits</h1>
	<p:separator></p:separator>


	<p:dataTable var="produit" value="#{sessionScope.listeProduits}">
		<p:column headerText="Id">
			<h:outputText value="#{produit.idProduit}" />
		</p:column>

		<p:column headerText="Désignation">
			<h:outputText value="#{produit.designation}" />
		</p:column>

		<p:column headerText="Description">
			<h:outputText value="#{produit.description}" />
		</p:column>

		<p:column headerText="Prix">
			<h:outputText value="#{produit.prix}" />
		</p:column>

		<p:column headerText="Stock">
			<h:outputText value="#{produit.quantite}" />
		</p:column>

		<p:column headerText="Categorie ID/Désignation">
			<h:outputText value="#{produit.categorie.idCategorie}" />
			<h:outputText value="/" />

			<h:outputText value="#{produit.categorie.nomCategorie}" />

		</p:column>

		<p:column headerText="Illustration">
			<p:graphicImage value="/#{produit.image}" width="150px" />


		</p:column>
	<p:column headerText="Image DB">
	</p:column>

		<p:column headerText="Supprimer le produit">
			<h:form>
				<h:commandButton value="Supprimer le produit"
					action="#{produitMB.supprimerProduit}">
					<f:setPropertyActionListener value="#{produit.idProduit}"
						target="#{produitMB.produit.idProduit}"></f:setPropertyActionListener>
				</h:commandButton>
			</h:form>

		</p:column>

	</p:dataTable>




	<h1 style="text-align: center; position: relative; color: gold">Liste
		des catégories</h1>
	<p:separator></p:separator>

	<p:dataTable var="categorie" value="#{sessionScope.listeCategories}">
		<p:column headerText="Id">
			<h:outputText value="#{categorie.idCategorie}" />
		</p:column>

		<p:column headerText="Désignation">
			<h:outputText value="#{categorie.nomCategorie}" />
		</p:column>

		<p:column headerText="Description">
			<h:outputText value="#{categorie.description}" />
		</p:column>

		<p:column headerText="Supprimer la catégorie">
			<h:form>

				<h:commandButton value="Supprimer"
					action="#{categorieMB.supprimerCategorie}">
					<f:setPropertyActionListener value="#{categorie.idCategorie}"
						target="#{categorieMB.categorie.idCategorie}"></f:setPropertyActionListener>
				</h:commandButton>
			</h:form>
		</p:column>

	</p:dataTable>

	<h1 style="text-align: center; position: relative; color: gold">Modifier
		un produit</h1>
	<h:form>
		ID (Produit) :  <p:inputText value="#{produitMB.produit.idProduit}"
			required="true" />
						Designation : <p:inputText
			value="#{produitMB.produit.designation}" required="true" />
		Description : <p:inputText value="#{produitMB.produit.description}"
			required="true" />
		Prix : <p:inputText value="#{produitMB.produit.prix}" required="true" />
		Stock : <p:inputText value="#{produitMB.produit.quantite}"
			required="true" />
		Catégorie (ID) : <p:inputText value="#{produitMB.idCategorie}"
			required="true" validator="#{produitMB.verifCategorie}"/>
			
			Image :

		<p:selectOneListbox value="#{produitMB.produit.image}">
			<f:selectItem itemLabel="Monopoly" itemValue="Monopoly.png" />
			<f:selectItem itemLabel="Petits Chevaux"
				itemValue="PetitsChevaux.png" />
			<f:selectItem itemLabel="Elsa" itemValue="Elsa.png" />
		</p:selectOneListbox>


		<h:commandButton value="Remplacer"
			action="#{produitMB.modifierProduit}"></h:commandButton>
	</h:form>

	<h1 style="text-align: center; position: relative; color: gold">Ajouter
		une catégorie</h1>
	<h:form>
					Description de la catégorie: <p:inputText
			value="#{categorieMB.categorie.description}" required="true" />

			Nom de la catégorie: <p:inputText
			value="#{categorieMB.categorie.nomCategorie}" required="true" />
		<h:commandButton value="Ajouter la catégorie"
			action="#{categorieMB.ajouterCategorie}" />


	</h:form>
	<h1 style="text-align: center; position: relative; color: gold">Rechercher
		une catégorie</h1>
	<h:form>
		<h:inputText value="#{categorieMB.categorie.idCategorie}"></h:inputText>

		<h:commandButton value="Rechercher"
			action="#{categorieMB.rechercheCategorieParId}"></h:commandButton>
	</h:form>

	<p:dataTable var="categorie" value="#{categorieMB.categorie}">
		<p:column headerText="Id">
			<h:outputText value="#{categorie.idCategorie}" />
		</p:column>

		<p:column headerText="Désignation">
			<h:outputText value="#{categorie.nomCategorie}" />
		</p:column>

		<p:column headerText="Description">
			<h:outputText value="#{categorie.description}" />
		</p:column>


	</p:dataTable>

	<h1 style="text-align: center; position: relative; color: gold">Modifier une catégorie</h1>
		<h:form>
		ID : <h:inputText value="#{categorieMB.categorie.idCategorie}"></h:inputText>
		Description : <h:inputText value="#{categorieMB.categorie.description}"></h:inputText>
		Designation : <h:inputText value="#{categorieMB.categorie.nomCategorie}"></h:inputText>

		<h:commandButton value="Modifier"
			action="#{categorieMB.modifierCategorie}"></h:commandButton>
	</h:form>
	
	<h1 style="text-align: center; position: relative; color: gold">PDF</h1>
	
	<h:form>
		<h:commandButton value="Ecrire PDF" action="#{adminMB.ecrirePDF}" ></h:commandButton>
	</h:form>





</h:body>
</html>